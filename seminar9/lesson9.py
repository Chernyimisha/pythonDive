from typing import Callable
import time
import random
from functools import wraps
from functools import cache
# #################################################################
# –í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –≥–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è x —Ä–∞–≤–Ω–∞ 73, –Ω–æ –ø—Ä–∏ —Å–ª–æ–∂–µ–Ω–∏–∏ –≤–Ω—É—Ç—Ä–∏
# —Ñ—É–Ω–∫—Ü–∏–∏ –∫ –∑–Ω–∞—á–µ–Ω–∏—é, a –ø—Ä–∏–±–∞–≤–ª—è–µ—Ç—Å—è 42 ‚Äî –∑–Ω–∞—á–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π x.


def func(a):
    x = 42
    res = x + a
    return res
x = 73
print(func(64))
print()
# #################################################################


def add_str(a: str, b: str) -> str:
    return a + ' ' + b
print(add_str('Hello', 'world!'))
print()


def add_one_str(a: str) -> Callable[[str], str]:
    def add_two_str(b: str) -> str:
        return a + ' ' + b
    return add_two_str

print(add_one_str('Hello')('world!'))
print()

hello = add_one_str('Hello')
bye = add_one_str('Good bye')
print(hello('world!'))
print(hello('friend!'))
print(bye('wonderful world!'))
print(f'{type(add_one_str) = }, {add_one_str.__name__ = }, {id(add_one_str) = }')
print(f'{type(hello) = }, {hello.__name__ = }, {id(hello) = }')
print(f'{type(bye) = }, {bye.__name__ = }, {id(bye) = }')
print()
# #################################################################
# –í–æ –≤–Ω–µ—à–Ω—é—é —Ñ—É–Ω–∫—Ü–∏—é –¥–æ–±–∞–≤–ª–µ–Ω —Å–ø–∏—Å–æ–∫ names. –ü—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π
# —Ñ—É–Ω–∫—Ü–∏–∏ –≤ —Å–ø–∏—Å–æ–∫ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ b –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è
# –ø–æ–ª–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–ø–∏—Å–∫–∞ –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏. –£ –∫–∞–∂–¥–æ–π –∏–∑ –¥–≤—É—Ö —Ñ—É–Ω–∫—Ü–∏–π hello –∏ bye
# –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–≤–æ–π —Å–ø–∏—Å–æ–∫ names. –û–Ω–∏ –Ω–µ —Å–≤—è–∑–∞–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π, –Ω–æ –∫–∞–∂–¥—ã–π —Ö—Ä–∞–Ω–∏—Ç
# —Å–ø–∏—Å–æ–∫ –∏–º—ë–Ω –¥–æ –∫–æ–Ω—Ü–∞ —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ list —è–≤–ª—è–µ—Ç—Å—è
# –∏–∑–º–µ–Ω—è–µ–º—ã–º —Ç–∏–ø–æ–º –¥–∞–Ω–Ω—ã—Ö.


def add_one_str(a: str) -> Callable[[str], str]:
    names = []

    def add_two_str(b: str) -> str:
        names.append(b)
        return a + ', ' + ', '.join(names)
    return add_two_str

hello = add_one_str('Hello')
bye = add_one_str('Good bye')
print(hello('Alex'))
print(hello('Karina'))
print(bye('Alina'))
print(hello('John'))
print(bye('Neo'))
print()
# #################################################################
# –ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –º—ã –ø–µ—Ä–µ–ø–∏—à–µ–º –∫–æ–¥ –∏ –∑–∞–º–µ–Ω–∏–º list –Ω–∞
# –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–π str?
# –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–ø–æ—Å–æ–±–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç—Ä–æ–∫–∏ c join –¥–ª—è —Å–ø–∏—Å–∫–∞ –Ω–∞ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—é –¥–ª—è —Å—Ç—Ä–æ–∫–∏
# –Ω–µ –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–æ. –ù–æ —Å—Ç–æ–∏—Ç –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ —Å–ª–æ–∂–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ –±–æ–ª–µ–µ –¥–æ—Ä–æ–≥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
# –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –ø–æ –ø–∞–º—è—Ç–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –æ–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–∞.
# –ß—Ç–æ –±–æ–ª–µ–µ –≤–∞–∂–Ω–æ - –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö —É —Å—Ç—Ä–æ–∫–∏ text. –ë–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–æ—á–∫–∏
# –∫–æ–¥–∞ nonlocal text –±—ã–ª–∞ –±—ã –ø–æ–ª—É—á–µ–Ω–∞ –æ—à–∏–±–∫–∞ UnboundLocalError: local variable 'text'
# referenced before assignment. –ú—ã —è–≤–Ω–æ —É–∫–∞–∑–∞–ª–∏, —á—Ç–æ —Ö–æ—Ç–∏–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫
# –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–æ–º—É –æ–±—ä–µ–∫—Ç—É –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è.
# –ö–∞–∫ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–æ–µ? –ú—ã —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç –∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –µ–º—É
# —Å—Ç–∞—Ä–æ–µ –∏–º—è. –°—Ç–∞—Ä—ã–π –æ–±—ä–µ–∫—Ç –±—É–¥–µ—Ç —É–¥–∞–ª—ë–Ω —Å–±–æ—Ä—â–∏–∫–æ–º –º—É—Å–æ—Ä–∞. –ê –∫–æ–º–∞–Ω–¥–∞ nonlocal
# —Å–æ–æ–±—â–∞–µ—Ç Python, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–±—ä–µ–∫—Ç –¥–æ–ª–∂–Ω—ã –∑–∞—Ç—Ä–æ–Ω—É—Ç—å –æ–±–ª–∞—Å—Ç—å
# –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ —Ñ—É–Ω–∫—Ü–∏–∏ add_two_str.


def add_one_str(a: str) -> Callable[[str], str]:
    text = ''

    def add_two_str(b: str) -> str:
        nonlocal text
        text += ', ' + b
        return a + text
    return add_two_str
hello = add_one_str('Hello')
bye = add_one_str('Good bye')
print(hello('Alex'))
print(hello('Karina'))
print(bye('Alina'))
print(hello('John'))
print(bye('Neo'))
print()
# #################################################################
# –ó–∞–¥–∞–Ω–∏–µ
# –ü–µ—Ä–µ–¥ –≤–∞–º–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞. –ù–∞–ø–∏—à–∏—Ç–µ —á—Ç–æ –≤—ã–≤–µ–¥–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∞, –Ω–µ –∑–∞–ø—É—Å–∫–∞—è
# –∫–æ–¥. –£ –≤–∞—Å 3 –º–∏–Ω—É—Ç—ã.


def main(x: int) -> Callable[[int], dict[int, int]]:
    d = {}

    def loc(y: int) -> dict[int, int]:
        for i in range(y):
            d[i] = x ** i
        return d
    return loc

small = main(42)
big = main(73)
print(small(7))
print(big(7))
print(small(3))
print(small(9))
print()
# #################################################################
# 2. –ü—Ä–æ—Å—Ç–æ–π –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
# –ü–µ—Ä–µ–¥–∞—á–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞
# –î–æ —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –Ω–∞—à –∫–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–ª —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–æ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–ª –∏—Ö. –ò—Å–ø—Ä–∞–≤–∏–º
# —Å–∏—Ç—É–∞—Ü–∏—é –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ —Å–∞–º–æ–ø–∏—Å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª–∞. –ù–∞–ø–æ–º–Ω–∏–º, —á—Ç–æ
# —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª —á–∏—Å–ª–∞ - –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —á–∏—Å–µ–ª –æ—Ç –µ–¥–∏–Ω–∏—Ü—ã –¥–æ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —á–∏—Å–ª–∞.


def main(func: Callable):
    def wrapper(*args, **kwargs):
        print(f'–ó–∞–ø—É—Å–∫ —Ñ—É–Ω–∫—Ü–∏–∏ {func.__name__} –≤ {time.time()}')
        result = func(*args, **kwargs)
        print(f'–†–µ–∑—É–ª—å—Ç–∞—Ç —Ñ—É–Ω–∫—Ü–∏–∏ {func.__name__}: {result}')
        print(f'–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ {func.__name__} –≤ {time.time()}')
        return result
    return wrapper


@main
def factorial(n: int) -> int:
    f = 1
    for i in range(2, n + 1):
        f *= i
    return f

print(f'{factorial(5) = }')
# control = main(factorial)
# print(f'{control.__name__ = }')
# print(f'{control(10) = }')
print()
# ‚óè –§—É–Ω–∫—Ü–∏—è main –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ –¥—Ä—É–≥—É—é —Ñ—É–Ω–∫—Ü–∏—é. –í–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏
# –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è wrapper, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π main.
# ‚óè –§—É–Ω–∫—Ü–∏—è wrapper –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞—Ä—É –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ *args –∏ **kwargs. –° –Ω–∏–º–∏ –≤—ã —É–∂–µ
# –∑–Ω–∞–∫–æ–º—ã. –ü–æ–¥–æ–±–Ω–∞—è –∑–∞–ø–∏—Å—å –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–Ω—è—Ç—å –ª—é–±–æ–µ —á–∏—Å–ª–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã—Ö
# –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏—Ö –≤ –∫–æ—Ä—Ç–µ–∂–µ args, –∞ —Ç–∞–∫–∂–µ –ª—é–±–æ–µ —á–∏—Å–ª–æ –∫–ª—é—á–µ–≤—ã—Ö
# –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ —Å–ª–æ–≤–∞—Ä–µ kwargs.
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π –≤–Ω—É—Ç—Ä–∏ wrapper —è–≤–ª—è–µ—Ç—Å—è result = func(*args, **kwargs).
# –ü–µ—Ä–µ–¥–∞–Ω–Ω–∞—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è func –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ –≤—Å–µ–º–∏
# –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω—ã. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –≤—ã–≤–æ–¥–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
# –æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–ø—É—Å–∫–∞, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –∏ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏. –ù–µ
# –∑–∞–±—ã–≤–∞–µ–º –≤–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã func –∏–∑ wrapper.
# ‚óè –§—É–Ω–∫—Ü–∏—è factorial –≤—ã—á–∏—Å–ª—è–µ—Ç —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª –¥–ª—è –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —á–∏—Å–ª–∞.
# ‚óè –í –Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏ –∫–æ–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ–º –ø–æ–∏—Å–∫ —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª–∞, –ø—Ä–æ–≤–µ—Ä—è–µ–º
# —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å. –î–∞–ª–µ–µ –º—ã —Å–æ–∑–¥–∞—ë–º —Ñ—É–Ω–∫—Ü–∏—é control –≤ –∫–æ—Ç–æ—Ä—É—é
# –ø–æ–º–µ—â–∞–µ—Ç—Å—è wrapper —Å –∑–∞–º–∫–Ω—É—Ç–æ–π –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–π func ‚Äî –Ω–∞—à–µ–π —Ñ—É–Ω–∫—Ü–∏–µ–π
# factorial. –ü—Ä–∏ –≤—ã–∑–æ–≤–µ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–º–∏–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø–æ–∏—Å–∫–∞
# —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª–∞ –ø–æ–ª—É—á–∞–µ–º –≤—ã–≤–æ–¥ –ø—Ä–æ–ø–∏—Å–∞–Ω–Ω—ã–π –≤–Ω—É—Ç—Ä–∏ wrapper.
# –ó–∞–º—ã–∫–∞–Ω–∏–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–π –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–Ω—É—Ç—Ä–∏ –¥—Ä—É–≥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
# –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–µ–∫–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–∏. –í –Ω–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ main ‚Äî –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä,
# –∫–æ—Ç–æ—Ä—ã–º –º—ã –¥–µ–∫–æ—Ä–∏—Ä–æ–≤–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é factorial.

# #################################################################
# –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –¥–µ–∫–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ
# Python –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤ –Ω–∞ –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.
# –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –ø—Ä–æ—Å—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ.


def deco_a(func: Callable):
    def wrapper_a(*args, **kwargs):
        print('–°—Ç–∞—Ä—Ç –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ A')
        print(f'–ó–∞–ø—É—Å–∫–∞—é {func.__name__}')
        res = func(*args, **kwargs)
        print('–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ A')
        return res
    print('–í–æ–∑–≤—Ä–∞—â–∞–µ–º –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä A')
    return wrapper_a


def deco_b(func: Callable):
    def wrapper_b(*args, **kwargs):
        print('–°—Ç–∞—Ä—Ç –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ B')
        print(f'–ó–∞–ø—É—Å–∫–∞—é {func.__name__}')
        res = func(*args, **kwargs)
        print('–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ B')
        return res
    print('–í–æ–∑–≤—Ä–∞—â–∞–µ–º –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä B')
    return wrapper_b


def deco_c(func: Callable):
    def wrapper_c(*args, **kwargs):
        print('–°—Ç–∞—Ä—Ç –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ C')
        print(f'–ó–∞–ø—É—Å–∫–∞—é {func.__name__}')
        res = func(*args, **kwargs)
        print('–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ C')
        return res
    print('–í–æ–∑–≤—Ä–∞—â–∞–µ–º –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä C')
    return wrapper_c


@deco_c
@deco_b
@deco_a
def main():
    print('–°—Ç–∞—Ä—Ç –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏')

main()
print()
# –ú—ã —Å–æ–∑–¥–∞–ª–∏ —Ç—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–æ–±—â–∞—é—Ç –æ –Ω–∞—á–∞–ª–µ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
# —Ä–∞–±–æ—Ç—ã –∏ –æ –º–æ–º–µ–Ω—Ç–µ –¥–µ–∫–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è: A, B, C.
# –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤ —É —Ñ—É–Ω–∫—Ü–∏–∏ main. –ë–ª–∏–∂–∞–π—à–∏–π –∫ —Ñ—É–Ω–∫—Ü–∏–∏
# –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä A. –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –° –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–µ—Ä–≤—ã–º –≤ —Å–ø–∏—Å–∫–µ, —Ç.–µ. –æ–Ω –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —É–¥–∞–ª—ë–Ω
# –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.
# –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–¥–∞ –ø—Ä–æ—Ü–µ—Å—Å –¥–µ–∫–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö, —Å A, –¥–∞–ª–µ–µ B –∏ –ª–∏—à—å
# –ø–æ—Ç–æ–º C.
# –ü—Ä–µ–∂–¥–µ —á–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–¥ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–æ–¥ –≤–µ—Ä—Ö–Ω–µ–≥–æ
# –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ –°, –¥–∞–ª–µ–µ B, –≤ –∫–æ–Ω—Ü–µ –Ω–∏–∂–Ω–∏–π A –∏ —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–º –∫–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏ main. –ü–æ—Å–ª–µ
# —Ç–æ–≥–æ –∫–∞–∫ –¥–µ–∫–æ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–≤–µ—Ä—à–∏–ª–∞ —Ä–∞–±–æ—Ç—É –∏ –≤–µ—Ä–Ω—É–ª–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
# –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –∑–∞–≤–µ—Ä—à–∞—é—Ç —Ä–∞–±–æ—Ç—É –≤ –æ–±—Ä–∞—Ç–Ω–æ–º —Å—Ç–∞—Ä—Ç—É –ø–æ—Ä—è–¥–∫–µ, —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö. –í
# –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ—à–∞–µ–º—ã—Ö –∑–∞–¥–∞—á –ø–æ—Ä—è–¥–æ–∫ –¥–µ–∫–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Ä–∞–∑–Ω—ã–º
# —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º.

# #################################################################
# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–µ
# –ú—ã —É–∂–µ –∑–∞–º—ã–∫–∞–ª–∏ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–ø–∏—Å–æ–∫ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –∏–º—ë–Ω.
# –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –æ—Ç–∫—Ä—ã–≤–∞—é—Ç –±–æ–ª—å—à–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.
# –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–æ–≥–æ –∫—ç—à–∏—Ä—É—é—â–µ–≥–æ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞.


def cache(func: Callable):
    _cache_dict = {}

    def wrapper(*args):
        if args not in _cache_dict:
            _cache_dict[args] = func(*args)
            return _cache_dict[args]
    return wrapper


@cache
def factorial(n: int) -> int:
    print(f'–í—ã—á–∏—Å–ª—è—é —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª –¥–ª—è —á–∏—Å–ª–∞ {n}')
    f = 1
    for i in range(2, n + 1):
        f *= i
    return f
print(f'{factorial(10) = }')
print(f'{factorial(15) = }')
print(f'{factorial(10) = }')
print(f'{factorial(20) = }')
print(f'{factorial(10) = }')
print(f'{factorial(20) = }')
print()
# –í–Ω—É—Ç—Ä–∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ cache —Å–æ–∑–¥–∞–ª–∏ –ø—É—Å—Ç–æ–π —Å–ª–æ–≤–∞—Ä—å _cache_dict. –ü—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ
# —Ñ—É–Ω–∫—Ü–∏–∏ factorial –≤–Ω—É—Ç—Ä–∏ –æ–±—ë—Ä—Ç–∫–∏ wrapper –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞. –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–µ
# –¥–ª—è –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª–æ —á–∏—Å–ª–æ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∫–ª—é—á—ë–º —Å–ª–æ–≤–∞—Ä—è, —Å–æ–∑–¥–∞—ë–º
# —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–ª—é—á –∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –µ–º—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç
# –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª–∞. –ö–æ–≥–¥–∞ –≤ —Å–ª–æ–≤–∞—Ä–µ –µ—Å—Ç—å –∫–ª—é—á, –¥–µ–∫–æ—Ä–∏—Ä—É–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ
# –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, –∞ –æ—Ç–≤–µ—Ç —Å—Ä–∞–∑—É –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∏–∑ —Å–ª–æ–≤–∞—Ä—è.
# üî• –í–∞–∂–Ω–æ! –ú—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –∏—Å–∫–ª—é—á–∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä **kwargs –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏
# wrapper, —Ç.–∫. —ç—Ç–æ —Å–ª–æ–≤–∞—Ä—å –∫–ª—é—á–µ–≤—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤. –ü–æ–ø—ã—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤
# 13
# –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–∞ —Å–ª–æ–≤–∞—Ä—è _cache_dict –¥—Ä—É–≥–æ–≥–æ —Å–ª–æ–≤–∞—Ä—è kwargs –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –æ—à–∏–±–∫–µ.
# –ö–ª—é—á–æ–º –º–æ–∂–µ—Ç –≤—ã—Å—Ç—É–ø–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ –æ–±—ä–µ–∫—Ç—ã.

# #################################################################
# –ó–∞–¥–∞–Ω–∏–µ
# –ü–µ—Ä–µ–¥ –≤–∞–º–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞. –ù–∞–ø–∏—à–∏—Ç–µ —á—Ç–æ –≤—ã–≤–µ–¥–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∞, –Ω–µ –∑–∞–ø—É—Å–∫–∞—è
# –∫–æ–¥. –£ –≤–∞—Å 3 –º–∏–Ω—É—Ç—ã.


def cache(func: Callable):
    _cache_dict = {}

    def wrapper(*args):
        if args not in _cache_dict:
            _cache_dict[args] = func(*args)
            return _cache_dict[args]
    return wrapper


@cache
def rnd(a: int, b: int) -> int:
    return random.randint(a, b)
print(f'{rnd(1, 10) = }')
print(f'{rnd(1, 10) = }')
print(f'{rnd(1, 10) = }')
print()

# #################################################################
# 3. –î–µ–∫–æ—Ä–∞—Ç–æ—Ä —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
# –î–æ —ç—Ç–æ–≥–æ –º—ã –≤–∫–ª–∞–¥—ã–≤–∞–ª–∏ –æ–¥–Ω—É —Ñ—É–Ω–∫—Ü–∏—é –≤ –¥—Ä—É–≥—É—é –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–º—ã–∫–∞–Ω–∏—è. –ï—Å–ª–∏ –º—ã
# —Ö–æ—Ç–∏–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —Ç—Ä–µ—Ç–∏–π
# —É—Ä–æ–≤–µ–Ω—å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–∏–º–µ—Ä –∫–æ–¥–∞.

def count(num: int = 1):
    def deco(func: Callable):
        def wrapper(*args, **kwargs):
            time_for_count = []
            result = None
            for _ in range(num):
                start = time.perf_counter()
                result = func(*args, **kwargs)
                stop = time.perf_counter()
                time_for_count.append(stop - start)
                print(f'–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–º–µ—Ä–æ–≤ {time_for_count}')
            return result
        return wrapper
    return deco


@count(10)
def factorial(n: int) -> int:
    f = 1
    for i in range(2, n + 1):
        f *= i
    return f

print(f'{factorial(10) = }')
print(f'{factorial(10) = }')
print()
# ‚óè –í–Ω–µ—à–Ω—è—è —Ñ—É–Ω–∫—Ü–∏—è count –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ num. –î–∞–Ω–Ω—ã–π
# –ø–∞—Ä–∞–º–µ—Ç—Ä –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –¥–ª—è —Ü–∏–∫–ª–∞ for.
# ‚óè –§—É–Ω–∫—Ü–∏—è deco –∫–∞–∫ –∏ –≤ –ø—Ä–æ—à–ª—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–µ–∫–ª–∞—Ä–∏—Ä—É–µ–º—É—é
# —Ñ—É–Ω–∫—Ü–∏—é.
# ‚óè –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ñ—É–Ω–∫—Ü–∏—è wrapper —Å–æ–∑–¥–∞—ë—Ç —Å–ø–∏—Å–æ–∫ time_for_count –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è
# —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∑–∞–º–µ—Ä–æ–≤ –±—ã—Å—Ç—Ä–æ–¥–µ–π—Å—Ç–≤–∏—è.
# ‚óã –ó–∞–ø—É—Å–∫–∞–µ–º —Ü–∏–∫–ª for —Å—Ç–æ–ª—å–∫–æ —Ä–∞–∑, —Å–∫–æ–ª—å–∫–æ –º—ã –ø–µ—Ä–µ–¥–∞–ª–∏ –≤ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä:
# @count(10)
# ‚óã –í–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–∞ for –∑–∞–º–µ—Ä—è–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è. –î–∞–ª–µ–µ –≤—ã–ø–æ–ª–Ω—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é
# –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é. –ó–∞–º–µ—Ä—è–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ
# –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–∞–∑–Ω–∏—Ü—É –≤ —Å–ø–∏—Å–æ–∫.
# ‚óã –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ü–∏–∫–ª–∞ —Å–æ–æ–±—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑ —Å–ø–∏—Å–∫–∞
# time_for_count –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –¥–µ–∫–ª–∞—Ä–∏—Ä—É–µ–º–æ–π
# —Ñ—É–Ω–∫—Ü–∏–∏.
# ‚óè –ò—Å–ø–æ–ª—å–∑—É—è –æ–±—ë—Ä—Ç–∫—É –¥–ª—è —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª–∞ –¥–µ–ª–∞–µ–º 10 –∑–∞–º–µ—Ä–æ–≤ –∏ —Å–º–æ—Ç—Ä–∏–º –≤—Ä–µ–º—è –Ω–∞
# –≤—ã—á–∏—Å–ª–µ–Ω–∏—è.
# üî• –í–∞–∂–Ω–æ! –ü–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–æ–∫–∞ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –Ω–µ —Å–ª—É—á–∞–π–Ω–æ. –ö–∞–∂–¥—ã–π –∏–∑ –¥–≤—É—Ö
# –∑–∞–ø—É—Å–∫–æ–≤ –¥–µ–ª–∞–µ—Ç –ø–æ 10 –∑–∞–º–µ—Ä–æ–≤. –ï—Å–ª–∏ –±—ã —Å–ø–∏—Å–æ–∫ time_for_count –±—ã–ª —Å–æ–∑–¥–∞–Ω –Ω–∞
# —É—Ä–æ–≤–µ–Ω—å –≤—ã—à–µ, –≤ —Ñ—É–Ω–∫—Ü–∏–∏ deco, –ø—Ä–æ–∏–∑–æ—à–ª–æ –±—ã –µ–≥–æ –∑–∞–º—ã–∫–∞–Ω–∏–µ. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ
# –∫–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ factorial –¥–æ–ø–æ–ª–Ω—è–ª –±—ã —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–ø–∏—Å–æ–∫,
# –∞ –Ω–µ —Å–æ–∑–¥–∞–≤–∞–ª –±—ã –Ω–æ–≤—ã–µ 10 –∑–Ω–∞—á–µ–Ω–∏–π.
# –î–µ–∫–æ—Ä–∞—Ç–æ—Ä —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ª—é–±—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç
# –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è.
# üî• –í–∞–∂–Ω–æ! –î–ª—è –æ—Ü–µ–Ω–∫–∏ –±—ã—Å—Ç—Ä–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–¥–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
# –º–æ–¥—É–ª—å timeit –∏–∑ ‚Äú–±–∞—Ç–∞—Ä–µ–µ–∫ Python‚Äù, –∞ –Ω–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –≤—ã—à–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä.

# #################################################################
# –ó–∞–¥–∞–Ω–∏–µ
# –ü–µ—Ä–µ–¥ –≤–∞–º–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞. –ù–∞–ø–∏—à–∏—Ç–µ —á—Ç–æ –≤—ã–≤–µ–¥–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∞, –Ω–µ –∑–∞–ø—É—Å–∫–∞—è
# –∫–æ–¥. –£ –≤–∞—Å 3 –º–∏–Ω—É—Ç—ã.


def count(num: int = 1):
    def deco(func: Callable):
        counter = []

        def wrapper(*args, **kwargs):
            for _ in range(num):
                result = func(*args, **kwargs)
                counter.append(result)
            return counter
        return wrapper
    return deco


@count(10)
def rnd(a: int, b: int) -> int:
    return random.randint(a, b)
print(f'{rnd(1, 10) = }')
print(f'{rnd(1, 100) = }')
print(f'{rnd(1, 1000) = }')
print()

# #################################################################

# 4. –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã functools
# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–µ–∫–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ–¥—É–ª—å functools –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä.
#
# –î–µ–∫–æ—Ä–∞—Ç–æ—Ä wraps
# –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –∫–æ–¥ –∏–∑ –ø—Ä–æ—à–ª–æ–π –≥–ª–∞–≤—ã, –Ω–æ –¥–æ–±–∞–≤–∏–º —Å—Ç—Ä–æ–∫—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ —Ñ—É–Ω–∫—Ü–∏—é factorial.

@count(10)
def factorial(n: int) -> int:
    """Returns the factorial of the number n."""
    f = 1
    for i in range(2, n + 1):
        f *= i
    return f

print(f'{factorial(1000) = }')
print(f'{factorial.__name__ = }')
help(factorial)

# –í–º–µ—Å—Ç–æ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ –≤—ã–≤–æ–¥–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –æ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –µ—ë –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª—É—á–∞–µ–º
# –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–±—ë—Ä—Ç–∫–µ wrapper:

# factorial.__name__ = 'wrapper'
# Help on function wrapper in module __main__:
# wrapper(*args, **kwargs)
# –ß—Ç–æ–±—ã –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å–∏—Ç—É–∞—Ü–∏—é, –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º wraps –∏–∑ functools.

# import time
# from typing import Callable
# from functools import wraps
def count(num: int = 1):
    def deco(func: Callable):
        @wraps(func)
        def wrapper(*args, **kwargs):
            time_for_count = []

# –î–µ–∫–æ—Ä–∞—Ç–æ—Ä wraps –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫ —Ñ—É–Ω–∫—Ü–∏–∏ wrapper, —Ç.–µ. –∫ —Å–∞–º–æ–π –≥–ª—É–±–æ–∫–æ –≤–ª–æ–∂–µ–Ω–Ω–æ–π
# —Ñ—É–Ω–∫—Ü–∏–∏. –í –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ wraps –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–µ–∫–ª–∞—Ä–∏—Ä—É–µ–º–æ–π
# —Ñ—É–Ω–∫—Ü–∏–∏. –¢–µ–ø–µ—Ä—å factorial –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–≤–æ–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ —Å—Ç—Ä–æ–∫—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.
# –î–µ–∫–æ—Ä–∞—Ç–æ—Ä cache
# –†–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ –∑–∞–º—ã–∫–∞–Ω–∏—é –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –º—ã —Å–æ–∑–¥–∞–ª–∏ –∫—ç—à–∏—Ä—É—é—â–∏–π
# –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä. –í –º–æ–¥—É–ª–µ functools –µ—Å—Ç—å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä cache —Å –ø–æ–¥–æ–±–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º. –ü—Ä–∏
# –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º–µ–Ω–Ω–æ –µ–≥–æ, –∫–∞–∫
# –±–æ–ª–µ–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –∏–∑ –∫–æ—Ä–æ–±–∫–∏.
# from functools import cache


@cache
def factorial(n: int) -> int:
    print(f'–í—ã—á–∏—Å–ª—è—é —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª –¥–ª—è —á–∏—Å–ª–∞ {n}')
    f = 1
    for i in range(2, n + 1):
        f *= i
    return f
print(f'{factorial(10) = }')
print(f'{factorial(15) = }')
print(f'{factorial(10) = }')
print(f'{factorial(20) = }')
print(f'{factorial(10) = }')
print(f'{factorial(20) = }')

# –ö–∞–∫ –≤—ã –≤–∏–¥–∏—Ç–µ —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ –≤—ã–∑–æ–≤—ã –∑–∞–ø—É—Å–∫–∞—é—Ç —Ñ—É–Ω–∫—Ü–∏—é. –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–∑–æ–≤ —Å —É–∂–µ
# –ø–µ—Ä–µ–¥–∞–≤–∞–≤—à–∏–º—Å—è –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º cache.

